import{Q as i}from"./QInput-CJt-xT-X.js";import{Q as u}from"./QSelect-U9GO-vcy.js";import{Q as b}from"./QItemLabel-CDx0sUKF.js";import{Q as v}from"./QItemSection-Dr7pKUWg.js";import{Q as V}from"./QItem-DGC_oh8H.js";import{Q as w}from"./QCheckbox-C-madECj.js";import{_ as Q,Q as h,a as y}from"./_plugin-vue_export-helper-DE_L9tpe.js";import{Q as C}from"./QSeparator-DlYTESWS.js";import{r as A,c as U,o as n,w as t,a as l,b as r,t as p,g as f,i as c,O as k,P as x,f as S,Q as _,L as N}from"./app-B9ngRPxC.js";import{Q as q}from"./QCardActions-BXiB0Jwk.js";import{Q as I}from"./QForm-QL7SKRAj.js";import{A as O}from"./Authenticated-Bi_brb96.js";import"./use-key-composition-CcPeSjoe.js";import"./use-id-Bsf40j7l.js";import"./focus-manager-BJWzFvJg.js";import"./format-DSaZ9Sxz.js";import"./QList-CauX3dmB.js";import"./use-timeout-BLTl8fd9.js";import"./use-model-toggle-D3uVg552.js";import"./QDialog-Bd7-soYq.js";import"./use-checkbox-D0S0Xvb9.js";import"./QToolbar-tVFOb00I.js";import"./QBtnGroup-uFzmfQIw.js";import"./touch-BjYP5sR0.js";const P={components:{AuthenticatedLayout:O},props:{user:Object,clients:Array,selectedClientIds:Array},data(){return{form:N({name:this.user.name,email:this.user.email,password:"",password_confirmation:"",role:this.user.role,client_ids:this.selectedClientIds,reset_2fa:!1}),roleOptions:[{label:"Admin",value:"admin"},{label:"Manager",value:"manager"}]}},computed:{clientOptions(){return this.clients.map(m=>({label:m.name,value:m.id}))}},methods:{submit(){this.form.put(route("users.update",this.user.id),{onSuccess:()=>{this.$q.notify({type:"positive",message:"User updated successfully"})}})},cancel(){this.$inertia.visit(route("users.index"))}}},B={class:"q-gutter-md"},L={class:"row items-center justify-between q-mb-md"},E={class:"text-h5"},T={class:"row q-col-gutter-md"},F={class:"col-12 col-md-6"},R={class:"col-12 col-md-6"},j={class:"col-12 col-md-6"},z={class:"col-12 col-md-6"},D={class:"col-12"},M={key:0,class:"col-12"},G={key:1,class:"col-12"};function H(m,o,d,J,e,a){const g=A("AuthenticatedLayout");return n(),U(g,null,{default:t(()=>[l("div",B,[l("div",L,[l("div",E,"Edit User: "+p(d.user.name),1)]),r(h,null,{default:t(()=>[r(I,{onSubmit:a.submit},{default:t(()=>[r(y,null,{default:t(()=>[l("div",T,[l("div",F,[r(i,{modelValue:e.form.name,"onUpdate:modelValue":o[0]||(o[0]=s=>e.form.name=s),label:"Name",filled:"",error:!!e.form.errors.name,"error-message":e.form.errors.name},null,8,["modelValue","error","error-message"])]),l("div",R,[r(i,{modelValue:e.form.email,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.email=s),label:"Email",filled:"",type:"email",error:!!e.form.errors.email,"error-message":e.form.errors.email},null,8,["modelValue","error","error-message"])]),l("div",j,[r(i,{modelValue:e.form.password,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.password=s),label:"New Password (leave blank to keep current)",filled:"",type:"password",error:!!e.form.errors.password,"error-message":e.form.errors.password},null,8,["modelValue","error","error-message"])]),l("div",z,[r(i,{modelValue:e.form.password_confirmation,"onUpdate:modelValue":o[3]||(o[3]=s=>e.form.password_confirmation=s),label:"Confirm New Password",filled:"",type:"password",error:!!e.form.errors.password_confirmation,"error-message":e.form.errors.password_confirmation},null,8,["modelValue","error","error-message"])]),l("div",D,[r(u,{modelValue:e.form.role,"onUpdate:modelValue":o[4]||(o[4]=s=>e.form.role=s),options:e.roleOptions,label:"Role",filled:"","emit-value":"","map-options":"",error:!!e.form.errors.role,"error-message":e.form.errors.role},null,8,["modelValue","options","error","error-message"])]),e.form.role==="manager"?(n(),f("div",M,[r(u,{modelValue:e.form.client_ids,"onUpdate:modelValue":o[5]||(o[5]=s=>e.form.client_ids=s),options:a.clientOptions,label:"Assign Clients",filled:"",multiple:"","emit-value":"","map-options":"","option-value":"value","option-label":"label",error:!!e.form.errors.client_ids,"error-message":e.form.errors.client_ids,hint:"Select clients this manager can access"},{option:t(s=>[r(V,k(x(s.itemProps)),{default:t(()=>[r(v,null,{default:t(()=>[r(b,null,{default:t(()=>[S(p(s.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","error","error-message"])])):c("",!0),d.user.two_factor_secret?(n(),f("div",G,[r(w,{modelValue:e.form.reset_2fa,"onUpdate:modelValue":o[6]||(o[6]=s=>e.form.reset_2fa=s),label:"Reset Two-Factor Authentication",color:"negative"},null,8,["modelValue"]),o[7]||(o[7]=l("div",{class:"text-caption text-grey-7 q-ml-lg"}," This will disable 2FA for this user and require them to set it up again ",-1))])):c("",!0)])]),_:1}),r(C),r(q,{align:"right"},{default:t(()=>[r(_,{flat:"",label:"Cancel",onClick:a.cancel},null,8,["onClick"]),r(_,{type:"submit",color:"primary",label:"Update User",loading:e.form.processing},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})])]),_:1})}const ve=Q(P,[["render",H]]);export{ve as default};
