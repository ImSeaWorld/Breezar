import{_ as R,Q as c,a as u}from"./_plugin-vue_export-helper-DE_L9tpe.js";import{D as V,U,V as S,W as j,p as _,H as E,q as L,m as X,E as H,c as q,o as m,w as e,a,b as t,g as Q,i as P,t as i,e as v,Q as O,R as z,S as I,f as k,h as K,X as T}from"./app-B9ngRPxC.js";import{a as W}from"./QSelect-U9GO-vcy.js";import{Q as Y,a as B}from"./QTable-BWQ-_2Rh.js";import{Q as w}from"./QItemSection-Dr7pKUWg.js";import{Q as $}from"./QItemLabel-CDx0sUKF.js";import{Q as N}from"./QItem-DGC_oh8H.js";import{Q as F}from"./QList-CauX3dmB.js";import{u as G}from"./use-quasar-BSYRNlz7.js";import{A as J}from"./Authenticated-Bi_brb96.js";import"./use-key-composition-CcPeSjoe.js";import"./use-id-Bsf40j7l.js";import"./focus-manager-BJWzFvJg.js";import"./format-DSaZ9Sxz.js";import"./use-model-toggle-D3uVg552.js";import"./use-timeout-BLTl8fd9.js";import"./QDialog-Bd7-soYq.js";import"./QSeparator-DlYTESWS.js";import"./QLinearProgress-azICafWN.js";import"./QCheckbox-C-madECj.js";import"./use-checkbox-D0S0Xvb9.js";import"./QToolbar-tVFOb00I.js";import"./QBtnGroup-uFzmfQIw.js";import"./touch-BjYP5sR0.js";const M={position:{type:String,default:"bottom-right",validator:o=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(o)},offset:{type:Array,validator:o=>o.length===2},expand:Boolean};function Z(){const{props:o,proxy:{$q:f}}=V(),r=U(j,S);if(r===S)return console.error("QPageSticky needs to be child of QLayout"),S;const C=_(()=>{const s=o.position;return{top:s.indexOf("top")!==-1,right:s.indexOf("right")!==-1,bottom:s.indexOf("bottom")!==-1,left:s.indexOf("left")!==-1,vertical:s==="top"||s==="bottom",horizontal:s==="left"||s==="right"}}),p=_(()=>r.header.offset),g=_(()=>r.right.offset),x=_(()=>r.footer.offset),b=_(()=>r.left.offset),A=_(()=>{let s=0,d=0;const h=C.value,D=f.lang.rtl===!0?-1:1;h.top===!0&&p.value!==0?d=`${p.value}px`:h.bottom===!0&&x.value!==0&&(d=`${-x.value}px`),h.left===!0&&b.value!==0?s=`${D*b.value}px`:h.right===!0&&g.value!==0&&(s=`${-D*g.value}px`);const y={transform:`translate(${s}, ${d})`};return o.offset&&(y.margin=`${o.offset[1]}px ${o.offset[0]}px`),h.vertical===!0?(b.value!==0&&(y[f.lang.rtl===!0?"right":"left"]=`${b.value}px`),g.value!==0&&(y[f.lang.rtl===!0?"left":"right"]=`${g.value}px`)):h.horizontal===!0&&(p.value!==0&&(y.top=`${p.value}px`),x.value!==0&&(y.bottom=`${x.value}px`)),y}),n=_(()=>`q-page-sticky row flex-center fixed-${o.position} q-page-sticky--${o.expand===!0?"expand":"shrink"}`);function l(s){const d=E(s.default);return L("div",{class:n.value,style:A.value},o.expand===!0?d:[L("div",d)])}return{$layout:r,getStickyContent:l}}const tt=X({name:"QPageSticky",props:M,setup(o,{slots:f}){const{getStickyContent:r}=Z();return()=>r(f)}}),et={class:"row q-col-gutter-md"},st={class:"col-12 col-sm-6 col-md-3"},at={class:"text-h6"},lt={class:"col-12 col-sm-6 col-md-3"},ot={class:"text-h6"},it={class:"col-12 col-sm-6 col-md-3"},rt={class:"text-h6"},nt={class:"col-12 col-sm-6 col-md-3"},dt={class:"text-h6"},ct={key:0,class:"col-12 col-sm-6 col-md-3"},ut={class:"text-h6"},mt={key:1,class:"col-12 col-sm-6 col-md-3"},ft={class:"text-h6"},pt={class:"row q-col-gutter-md q-mt-md"},_t={class:"col-12 col-lg-8"},vt={class:"q-gutter-xs"},gt={class:"col-12 col-lg-4"},xt={__name:"Dashboard",props:{stats:Object,clients:Array,recentActivities:Array,recentLogins:Array},setup(o){const f=G(),r=H(!1),C=[{name:"name",label:"Client Name",field:"name",align:"left"},{name:"fly_org_id",label:"Fly Org ID",field:"fly_org_id",align:"left"},{name:"instances",label:"Instances",field:"instances",align:"left"},{name:"actions",label:"Actions",align:"center"}],p=n=>new Date(n).toLocaleString(),g=n=>{const l={"2fa_enabled":"enabled 2FA","2fa_disabled":"disabled 2FA",client_created:"created client",client_updated:"updated client",instance_restarted:"restarted instance",script_executed:"executed script"};return`${n.user.name} ${l[n.action]||n.action}`},x=n=>({"2fa_enabled":"mdi-shield-check","2fa_disabled":"mdi-shield-off",client_created:"mdi-plus-circle",client_updated:"mdi-pencil",instance_restarted:"mdi-restart",script_executed:"mdi-play"})[n]||"mdi-information",b=n=>{T.visit(route("clients.show",n))},A=async()=>{r.value=!0;try{await T.post(route("dashboard.refresh"),{},{preserveScroll:!0,onSuccess:()=>{f.notify({type:"positive",message:"Dashboard refreshed"})}})}finally{r.value=!1}};return(n,l)=>(m(),q(J,null,{default:e(()=>[a("div",null,[l[9]||(l[9]=a("div",{class:"row items-center justify-between q-mb-md"},[a("div",{class:"text-h5"},"Dashboard")],-1)),a("div",et,[a("div",st,[t(c,{flat:"",square:"",bordered:"",class:"stat-card"},{default:e(()=>[t(u,null,{default:e(()=>[a("div",at,i(o.stats.total_clients),1),l[0]||(l[0]=a("div",{class:"text-subtitle2 text-grey-7"},"Total Clients",-1))]),_:1,__:[0]}),t(v,{name:"mdi-domain",size:"3rem",class:"stat-icon text-primary"})]),_:1})]),a("div",lt,[t(c,{flat:"",square:"",bordered:"",class:"stat-card"},{default:e(()=>[t(u,null,{default:e(()=>[a("div",ot,i(o.stats.active_clients),1),l[1]||(l[1]=a("div",{class:"text-subtitle2 text-grey-7"},"Active Clients",-1))]),_:1,__:[1]}),t(v,{name:"mdi-check-circle",size:"3rem",class:"stat-icon text-positive"})]),_:1})]),a("div",it,[t(c,{flat:"",square:"",bordered:"",class:"stat-card"},{default:e(()=>[t(u,null,{default:e(()=>[a("div",rt,i(o.stats.total_instances),1),l[2]||(l[2]=a("div",{class:"text-subtitle2 text-grey-7"},"Total Instances",-1))]),_:1,__:[2]}),t(v,{name:"mdi-server",size:"3rem",class:"stat-icon text-info"})]),_:1})]),a("div",nt,[t(c,{flat:"",square:"",bordered:"",class:"stat-card"},{default:e(()=>[t(u,null,{default:e(()=>[a("div",dt,i(o.stats.running_instances),1),l[3]||(l[3]=a("div",{class:"text-subtitle2 text-grey-7"},"Running Instances",-1))]),_:1,__:[3]}),t(v,{name:"mdi-play-circle",size:"3rem",class:"stat-icon text-accent"})]),_:1})]),o.stats.total_users?(m(),Q("div",ct,[t(c,{flat:"",square:"",bordered:"",class:"stat-card"},{default:e(()=>[t(u,null,{default:e(()=>[a("div",ut,i(o.stats.total_users),1),l[4]||(l[4]=a("div",{class:"text-subtitle2 text-grey-7"},"Total Users",-1))]),_:1,__:[4]}),t(v,{name:"mdi-account-multiple",size:"3rem",class:"stat-icon text-secondary"})]),_:1})])):P("",!0),o.stats.admin_users?(m(),Q("div",mt,[t(c,{flat:"",square:"",bordered:"",class:"stat-card"},{default:e(()=>[t(u,null,{default:e(()=>[a("div",ft,i(o.stats.admin_users),1),l[5]||(l[5]=a("div",{class:"text-subtitle2 text-grey-7"},"Admin Users",-1))]),_:1,__:[5]}),t(v,{name:"mdi-shield-account",size:"3rem",class:"stat-icon text-warning"})]),_:1})])):P("",!0)]),a("div",pt,[a("div",_t,[t(c,{flat:"",square:"",bordered:""},{default:e(()=>[t(u,null,{default:e(()=>[l[6]||(l[6]=a("div",{class:"text-h6 q-mb-md"},"Client Overview",-1)),t(Y,{rows:o.clients,columns:C,"row-key":"id",pagination:{rowsPerPage:10},flat:"",bordered:""},{"body-cell-instances":e(s=>[t(B,{props:s},{default:e(()=>[a("div",vt,[(m(!0),Q(z,null,I(s.row.instances,d=>(m(),q(W,{key:d.id,color:d.status==="running"?"positive":"negative","text-color":"white",size:"sm",dense:""},{default:e(()=>[k(i(d.type.toUpperCase())+": "+i(d.status),1)]),_:2},1032,["color"]))),128))])]),_:2},1032,["props"])]),"body-cell-actions":e(s=>[t(B,{props:s},{default:e(()=>[t(O,{size:"sm",flat:"",dense:"",icon:"mdi-eye",onClick:d=>b(s.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1,__:[6]})]),_:1})]),a("div",gt,[t(c,{flat:"",square:"",bordered:"",class:"q-mb-md"},{default:e(()=>[t(u,null,{default:e(()=>[l[7]||(l[7]=a("div",{class:"text-h6 q-mb-md"},"Recent Logins",-1)),t(F,null,{default:e(()=>[(m(!0),Q(z,null,I(o.recentLogins,s=>(m(),q(N,{key:s.id},{default:e(()=>[t(w,{avatar:""},{default:e(()=>[t(K,{color:"primary","text-color":"white",size:"sm"},{default:e(()=>[k(i(s.user.name.charAt(0)),1)]),_:2},1024)]),_:2},1024),t(w,null,{default:e(()=>[t($,null,{default:e(()=>[k(i(s.user.name),1)]),_:2},1024),t($,{caption:""},{default:e(()=>[k(i(p(s.timestamp)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[7]})]),_:1}),t(c,{flat:"",square:"",bordered:""},{default:e(()=>[t(u,null,{default:e(()=>[l[8]||(l[8]=a("div",{class:"text-h6 q-mb-md"},"Recent Activities",-1)),t(F,null,{default:e(()=>[(m(!0),Q(z,null,I(o.recentActivities,s=>(m(),q(N,{key:s.id},{default:e(()=>[t(w,{avatar:""},{default:e(()=>[t(v,{name:x(s.action)},null,8,["name"])]),_:2},1024),t(w,null,{default:e(()=>[t($,null,{default:e(()=>[k(i(g(s)),1)]),_:2},1024),t($,{caption:""},{default:e(()=>[k(i(p(s.created_at)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[8]})]),_:1})])])]),t(tt,{position:"bottom-right",offset:[18,18]},{default:e(()=>[t(O,{fab:"",icon:"mdi-refresh",color:"primary",onClick:A,loading:r.value},null,8,["loading"])]),_:1})]),_:1}))}},jt=R(xt,[["__scopeId","data-v-af50ca43"]]);export{jt as default};
