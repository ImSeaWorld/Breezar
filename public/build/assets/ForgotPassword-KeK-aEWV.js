import{Q as g}from"./QItemSection-Dr7pKUWg.js";import{Q as x}from"./QItem-DGC_oh8H.js";import{Q}from"./QSeparator-DlYTESWS.js";import{g as d,o as u,a as r,b as t,w as s,f as l,k as c,l as p,e as f,Q as h,t as v,n as _,i as T}from"./app-B9ngRPxC.js";import{Q as q}from"./QInput-CJt-xT-X.js";import{Q as y}from"./QBtnGroup-uFzmfQIw.js";import{Q as k}from"./QForm-QL7SKRAj.js";import{_ as C,a as b,Q as S}from"./_plugin-vue_export-helper-DE_L9tpe.js";import{Q as I,a as w}from"./QTabPanels-sfM_IcaH.js";import{G as V}from"./Guest-CORBi5EL.js";import"./use-key-composition-CcPeSjoe.js";import"./use-id-Bsf40j7l.js";import"./focus-manager-BJWzFvJg.js";import"./touch-BjYP5sR0.js";import"./use-timeout-BLTl8fd9.js";const P={name:"ForgotPasswordPage",layout:V,props:{auth:Object,errors:Object,status:{type:String,default:""}},data(){return{resendTimer:{seconds:60,handle:null,initiated:!1},form:this.$inertia.form({email:""})}},methods:{submit(){const a=this;this.form.post(this.route("password.email"),{onSuccess(){a.initiateCount()}})},initiateCount(){this.resendTimer.initiated||(this.resendTimer.seconds=60,this.resendTimer.initiated=!0,this.resendTimer.handle=setInterval(this.countDown,1e3))},countDown(){if(this.resendTimer.seconds>0){this.resendTimer.seconds--;return}this.resendTimer.initiated=!1,clearInterval(this.resendTimer.handle)}},computed:{tab(){var a;return(((a=this.status)==null?void 0:a.length)??0)>0?"status":"form"},countdownActive(){return this.resendTimer.seconds>0}},watch:{tab(){this.tab==="status"&&this.initiateCount()}},beforeUnmount(){clearInterval(this.resendTimer.handle)}},B={class:"row justify-center align-center items-center full-height"},A={class:"col-11 col-md-4 col-lg-3"},E={class:"text-center"},F={class:"text-center text-h6 q-mt-sm"},N={class:"text-center text-sm text-gray-6 q-mt-sm"},R={class:"text-center"},j={key:0};function D(a,e,o,G,m,i){return u(),d("div",B,[r("div",A,[t(S,{class:"shadow-24"},{default:s(()=>[t(x,null,{default:s(()=>[t(g,{class:"text-h5 text-center"},{default:s(()=>e[4]||(e[4]=[l(" Forgot password ",-1)])),_:1,__:[4]})]),_:1}),t(Q),t(I,{"model-value":i.tab,animated:""},{default:s(()=>[t(w,{name:"form",class:"q-pa-none"},{default:s(()=>[e[5]||(e[5]=r("div",{class:"q-pt-md q-pr-md q-pl-md q-pb-none text-sm text-gray-6"}," Please fill in your email address and we will send you a link to reset your password. ",-1)),t(b,{class:"q-pt-sm"},{default:s(()=>[t(k,{onSubmit:c(i.submit,["prevent"])},{default:s(()=>[t(q,{label:"Email",modelValue:m.form.email,"onUpdate:modelValue":e[0]||(e[0]=n=>m.form.email=n),onKeyup:[p(c(i.submit,["ctrl"]),["enter"]),p(i.submit,["enter"])],error:o.errors.email?!0:null,"error-message":o.errors.email??""},{prepend:s(()=>[t(f,{name:"mdi-email"})]),_:1},8,["modelValue","onKeyup","error","error-message"]),t(y,{class:"q-my-sm",spread:""},{default:s(()=>[t(h,{"no-caps":"",label:"Email Reset Link",color:"secondary",type:"submit"})]),_:1}),r("div",E,[r("span",{class:"text-primary cursor-pointer text-underline",onClick:e[1]||(e[1]=n=>a.visit("login"))}," Remember your password? ")])]),_:1},8,["onSubmit"])]),_:1})]),_:1,__:[5]}),t(w,{name:"status",class:"q-pa-none"},{default:s(()=>[t(b,{class:"q-pt-sm"},{default:s(()=>[r("div",F,[t(f,{size:"lg",name:"mdi-email-check-outline",class:"text-positive"}),e[6]||(e[6]=l(" Reset Link Sent ",-1))]),r("div",N,v(o.status),1),e[8]||(e[8]=r("div",{class:"text-center text-sm text-gray-6 q-mt-sm"}," If you do not receive an email within 5 minutes, please try again. ",-1)),t(y,{class:"q-my-sm q-pt-md",spread:""},{default:s(()=>[t(h,{"no-caps":"",color:"secondary",label:"Login",onClick:e[2]||(e[2]=n=>a.visit("login"))})]),_:1}),r("div",R,[r("span",{onClick:e[3]||(e[3]=n=>i.countdownActive?void 0:i.submit()),class:_(["text-"+(i.countdownActive?"grey-7":"primary cursor-pointer text-underline")])},[e[7]||(e[7]=l(" Resend Email ",-1)),i.countdownActive?(u(),d("span",j," (wait "+v(m.resendTimer.seconds)+"s) ",1)):T("",!0)],2)])]),_:1,__:[8]})]),_:1})]),_:1},8,["model-value"])]),_:1})])])}const se=C(P,[["render",D]]);export{se as default};
